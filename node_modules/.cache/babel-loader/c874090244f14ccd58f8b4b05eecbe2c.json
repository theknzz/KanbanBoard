{"ast":null,"code":"var _jsxFileName = \"/home/joaquim/internship/kanban/src/App.js\";\nimport React, { useState, useEffect } from 'react';\nimport './App.css';\nimport initialData from \"./initial-data\";\nimport Column from './components/Column.jsx';\nimport { DragDropContext } from 'react-beautiful-dnd';\nimport styled from 'styled-components';\nimport Navbar from \"./components/Navbar\";\nimport { connect } from 'react-redux';\nimport { updateBoard } from \"./store/actions/taskActions\";\nconst Container = styled.div`\n    display: flex;\n    flex-wrap: wrap;\n`;\n\nfunction App(props) {\n  // const onDragStart = (result) => {\n  //   document.body.style.color = 'orange';\n  // }\n  //\n  // const onDragUpdate = (result) => {\n  //     document.body.style.color = 'red';\n  // }\n  const onDragEnd = result => {\n    // document.body.style.color = 'inherit';\n    console.log(result);\n    const {\n      destination,\n      source,\n      draggableId\n    } = result; // if user is trying to drop a draggable out of a droppable\n\n    if (!destination) {\n      return;\n    } // if the user try to move the card into the same position nothing changes\n\n\n    if (destination.droppableId === source.droppableId && destination.index === source.index) {\n      return;\n    } // get the column and the tasks from the origin/source column\n\n\n    const srcColumn = props.cols[source.droppableId];\n    const srcTaskList = Array.from(srcColumn.taskIds); // get the column and the tasks from the destination column\n\n    const destColumn = props.cols[destination.droppableId];\n    const destTaskList = Array.from(destColumn.taskIds); // remove the tasks from the original position\n\n    srcTaskList.splice(source.index, 1);\n    console.log('track', srcTaskList);\n    if (source.droppableId === destination.droppableId) srcTaskList.splice(destination.index, 0, draggableId);\n    console.log('track', srcTaskList); // add the tasks at the final position\n\n    destTaskList.splice(destination.index, 0, draggableId); // update the source column\n\n    const newSourceColumn = { ...srcColumn,\n      taskIds: srcTaskList\n    }; // update the destination column\n\n    const newDestColumn = { ...destColumn,\n      taskIds: destTaskList\n    }; // update the board\n\n    const board = {\n      tasks: props.tasks,\n      columnOrder: props.columnOrder,\n      columns: { ...props.cols,\n        [source.droppableId]: newSourceColumn,\n        [destination.droppableId]: newDestColumn\n      }\n    }; // call an action to update the board\n\n    props.updateBoard(board);\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Navbar, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(DragDropContext, {\n    onDragEnd: onDragEnd // onDragStart={onDragStart}\n    // onDragUpdate={onDragUpdate}\n    ,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Container, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 15\n    }\n  }, props.columnOrder && props.columnOrder.map(columnId => {\n    const column = props.cols[columnId];\n    const tasks = column.taskIds && column.taskIds.map(taskId => props.tasks[taskId]);\n    console.log('dbg:', column);\n    return /*#__PURE__*/React.createElement(Column, {\n      key: column.id,\n      column: column,\n      tasks: tasks,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 30\n      }\n    });\n  }))));\n}\n\nconst mapStateToProps = state => {\n  return {\n    columnOrder: state.columnOrder,\n    cols: state.columns,\n    tasks: state.tasks\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    updateBoard: board => dispatch(updateBoard(board))\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(App);","map":{"version":3,"sources":["/home/joaquim/internship/kanban/src/App.js"],"names":["React","useState","useEffect","initialData","Column","DragDropContext","styled","Navbar","connect","updateBoard","Container","div","App","props","onDragEnd","result","console","log","destination","source","draggableId","droppableId","index","srcColumn","cols","srcTaskList","Array","from","taskIds","destColumn","destTaskList","splice","newSourceColumn","newDestColumn","board","tasks","columnOrder","columns","map","columnId","column","taskId","id","mapStateToProps","state","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport './App.css';\nimport initialData from \"./initial-data\";\nimport Column from './components/Column.jsx'\nimport { DragDropContext } from 'react-beautiful-dnd'\nimport styled from 'styled-components'\nimport Navbar from \"./components/Navbar\";\nimport { connect } from 'react-redux'\nimport {updateBoard} from \"./store/actions/taskActions\";\n\nconst Container = styled.div`\n    display: flex;\n    flex-wrap: wrap;\n`\n\nfunction App(props) {\n  // const onDragStart = (result) => {\n  //   document.body.style.color = 'orange';\n  // }\n  //\n  // const onDragUpdate = (result) => {\n  //     document.body.style.color = 'red';\n  // }\n\n  const onDragEnd = (result) => {\n    // document.body.style.color = 'inherit';\n      console.log(result)\n      const { destination, source, draggableId } = result;\n\n      // if user is trying to drop a draggable out of a droppable\n      if (!destination) {\n          return;\n      }\n\n      // if the user try to move the card into the same position nothing changes\n      if (\n          destination.droppableId === source.droppableId &&\n          destination.index === source.index\n      ) {\n          return;\n      }\n\n      // get the column and the tasks from the origin/source column\n      const srcColumn = props.cols[source.droppableId];\n      const srcTaskList = Array.from(srcColumn.taskIds);\n\n      // get the column and the tasks from the destination column\n      const destColumn = props.cols[destination.droppableId];\n      const destTaskList = Array.from(destColumn.taskIds);\n\n      // remove the tasks from the original position\n      srcTaskList.splice(source.index, 1);\n\n      console.log('track', srcTaskList)\n\n      if (source.droppableId === destination.droppableId)\n          srcTaskList.splice(destination.index, 0, draggableId);\n\n      console.log('track', srcTaskList)\n      // add the tasks at the final position\n      destTaskList.splice(destination.index, 0, draggableId);\n\n      // update the source column\n      const newSourceColumn = {\n          ...srcColumn,\n          taskIds: srcTaskList,\n      }\n\n      // update the destination column\n      const newDestColumn = {\n          ...destColumn,\n          taskIds: destTaskList,\n      }\n\n      // update the board\n      const board = {\n          tasks: props.tasks,\n          columnOrder: props.columnOrder,\n          columns: {\n              ...props.cols,\n              [source.droppableId]: newSourceColumn,\n              [destination.droppableId]: newDestColumn,\n          }\n      }\n\n      // call an action to update the board\n      props.updateBoard(board)\n  }\n\n  return (\n      <>\n          <Navbar />\n          <DragDropContext\n            onDragEnd={onDragEnd}\n            // onDragStart={onDragStart}\n            // onDragUpdate={onDragUpdate}\n          >\n              <Container>\n                  {props.columnOrder && props.columnOrder.map( columnId => {\n                      const column = props.cols[columnId];\n                      const tasks = column.taskIds && column.taskIds.map( taskId => props.tasks[taskId]);\n                      console.log('dbg:', column)\n                      return <Column key={column.id} column={column} tasks={tasks} />\n                  })}\n              </Container>\n          </DragDropContext>\n      </>\n  );\n}\n\nconst mapStateToProps = (state) => {\n    return {\n        columnOrder: state.columnOrder,\n        cols: state.columns,\n        tasks: state.tasks,\n    }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        updateBoard: (board) => dispatch(updateBoard(board)),\n    }\n}\n\nexport default  connect(mapStateToProps, mapDispatchToProps)(App);\n"]},"metadata":{},"sourceType":"module"}