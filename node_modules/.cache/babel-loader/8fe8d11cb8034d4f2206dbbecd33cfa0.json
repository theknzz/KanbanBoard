{"ast":null,"code":"import _defineProperty from\"/home/joaquim/internship/kanban/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/joaquim/internship/kanban/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _taggedTemplateLiteral from\"/home/joaquim/internship/kanban/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";function _templateObject(){var data=_taggedTemplateLiteral([\"\\n    display: flex;\\n    flex-wrap: wrap;\\n\"]);_templateObject=function _templateObject(){return data;};return data;}import React,{useState,useEffect}from'react';import'./App.css';import initialData from\"./initial-data\";import Column from'./components/Column.jsx';import{DragDropContext}from'react-beautiful-dnd';import styled from'styled-components';import Navbar from\"./components/Navbar\";import{connect}from'react-redux';import{updateBoard as _updateBoard}from\"./store/actions/taskActions\";var Container=styled.div(_templateObject());function App(props){// const onDragStart = (result) => {\n//   document.body.style.color = 'orange';\n// }\n//\n// const onDragUpdate = (result) => {\n//     document.body.style.color = 'red';\n// }\nvar onDragEnd=function onDragEnd(result){var _objectSpread2;// document.body.style.color = 'inherit';\nconsole.log(result);var destination=result.destination,source=result.source,draggableId=result.draggableId;// if user is trying to drop a draggable out of a droppable\nif(!destination){return;}// if the user try to move the card into the same position nothing changes\nif(destination.droppableId===source.droppableId&&destination.index===source.index){return;}// get the column and the tasks from the origin/source column\nvar srcColumn=props.cols[source.droppableId];var srcTaskList=Array.from(srcColumn.taskIds);// get the column and the tasks from the destination column\nvar destColumn=props.cols[destination.droppableId];var destTaskList=Array.from(destColumn.taskIds);// remove the tasks from the original position\nsrcTaskList.splice(source.index,1);console.log('track',srcTaskList);var inSameColumn=source.droppableId===destination.droppableId;if(inSameColumn)srcTaskList.splice(destination.index,0,draggableId);// add the tasks at the final position\ndestTaskList.splice(destination.index,0,draggableId);// update the source column\nvar newSourceColumn=_objectSpread(_objectSpread({},srcColumn),{},{taskIds:srcTaskList});// update the destination column\nvar newDestColumn=_objectSpread(_objectSpread({},destColumn),{},{taskIds:inSameColumn?srcTaskList:destTaskList});// update the board\nvar board={tasks:props.tasks,columnOrder:props.columnOrder,columns:_objectSpread(_objectSpread({},props.cols),{},(_objectSpread2={},_defineProperty(_objectSpread2,source.droppableId,newSourceColumn),_defineProperty(_objectSpread2,destination.droppableId,newDestColumn),_objectSpread2))};// call an action to update the board\nprops.updateBoard(board);};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Navbar,null),/*#__PURE__*/React.createElement(DragDropContext,{onDragEnd:onDragEnd// onDragStart={onDragStart}\n// onDragUpdate={onDragUpdate}\n},/*#__PURE__*/React.createElement(Container,null,props.columnOrder&&props.columnOrder.map(function(columnId){var column=props.cols[columnId];var tasks=column.taskIds&&column.taskIds.map(function(taskId){return props.tasks[taskId];});console.log('dbg:',column);return/*#__PURE__*/React.createElement(Column,{key:column.id,column:column,tasks:tasks});}))));}var mapStateToProps=function mapStateToProps(state){return{columnOrder:state.columnOrder,cols:state.columns,tasks:state.tasks};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{updateBoard:function updateBoard(board){return dispatch(_updateBoard(board));}};};export default connect(mapStateToProps,mapDispatchToProps)(App);","map":{"version":3,"sources":["/home/joaquim/internship/kanban/src/App.js"],"names":["React","useState","useEffect","initialData","Column","DragDropContext","styled","Navbar","connect","updateBoard","Container","div","App","props","onDragEnd","result","console","log","destination","source","draggableId","droppableId","index","srcColumn","cols","srcTaskList","Array","from","taskIds","destColumn","destTaskList","splice","inSameColumn","newSourceColumn","newDestColumn","board","tasks","columnOrder","columns","map","columnId","column","taskId","id","mapStateToProps","state","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport './App.css';\nimport initialData from \"./initial-data\";\nimport Column from './components/Column.jsx'\nimport { DragDropContext } from 'react-beautiful-dnd'\nimport styled from 'styled-components'\nimport Navbar from \"./components/Navbar\";\nimport { connect } from 'react-redux'\nimport {updateBoard} from \"./store/actions/taskActions\";\n\nconst Container = styled.div`\n    display: flex;\n    flex-wrap: wrap;\n`\n\nfunction App(props) {\n  // const onDragStart = (result) => {\n  //   document.body.style.color = 'orange';\n  // }\n  //\n  // const onDragUpdate = (result) => {\n  //     document.body.style.color = 'red';\n  // }\n\n  const onDragEnd = (result) => {\n    // document.body.style.color = 'inherit';\n      console.log(result)\n      const { destination, source, draggableId } = result;\n\n      // if user is trying to drop a draggable out of a droppable\n      if (!destination) {\n          return;\n      }\n\n      // if the user try to move the card into the same position nothing changes\n      if (\n          destination.droppableId === source.droppableId &&\n          destination.index === source.index\n      ) {\n          return;\n      }\n\n      // get the column and the tasks from the origin/source column\n      const srcColumn = props.cols[source.droppableId];\n      const srcTaskList = Array.from(srcColumn.taskIds);\n\n      // get the column and the tasks from the destination column\n      const destColumn = props.cols[destination.droppableId];\n      const destTaskList = Array.from(destColumn.taskIds);\n\n      // remove the tasks from the original position\n      srcTaskList.splice(source.index, 1);\n\n      console.log('track', srcTaskList)\n\n      const inSameColumn = source.droppableId === destination.droppableId;\n\n      if (inSameColumn)\n          srcTaskList.splice(destination.index, 0, draggableId);\n\n      // add the tasks at the final position\n      destTaskList.splice(destination.index, 0, draggableId);\n\n      // update the source column\n      const newSourceColumn = {\n          ...srcColumn,\n          taskIds: srcTaskList,\n      }\n\n      // update the destination column\n      const newDestColumn = {\n          ...destColumn,\n          taskIds: inSameColumn ? srcTaskList : destTaskList,\n      }\n\n      // update the board\n      const board = {\n          tasks: props.tasks,\n          columnOrder: props.columnOrder,\n          columns: {\n              ...props.cols,\n              [source.droppableId]: newSourceColumn,\n              [destination.droppableId]: newDestColumn,\n          }\n      }\n\n      // call an action to update the board\n      props.updateBoard(board)\n  }\n\n  return (\n      <>\n          <Navbar />\n          <DragDropContext\n            onDragEnd={onDragEnd}\n            // onDragStart={onDragStart}\n            // onDragUpdate={onDragUpdate}\n          >\n              <Container>\n                  {props.columnOrder && props.columnOrder.map( columnId => {\n                      const column = props.cols[columnId];\n                      const tasks = column.taskIds && column.taskIds.map( taskId => props.tasks[taskId]);\n                      console.log('dbg:', column)\n                      return <Column key={column.id} column={column} tasks={tasks} />\n                  })}\n              </Container>\n          </DragDropContext>\n      </>\n  );\n}\n\nconst mapStateToProps = (state) => {\n    return {\n        columnOrder: state.columnOrder,\n        cols: state.columns,\n        tasks: state.tasks,\n    }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        updateBoard: (board) => dispatch(updateBoard(board)),\n    }\n}\n\nexport default  connect(mapStateToProps, mapDispatchToProps)(App);\n"]},"metadata":{},"sourceType":"module"}